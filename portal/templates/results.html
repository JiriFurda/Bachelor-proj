{% extends 'layout.html' %}

{% block body %}
	<div class="container container--main">
		<div class="sidebar">
			{% for facet_name, facet_attributes in facets.items() %}
				<fieldset class="form-group">
					
		    		<legend class="line_under">
		    			<a data-toggle="collapse" href="#facetCollapse-{{ loop.index }}" role="button" aria-expanded="false" aria-controls="facetCollapse-{{ loop.index }}">
		    				{{ facet_attributes['label'] }}
		    			</a>
		    		</legend>
		    		<div class="collapse" id="facetCollapse-{{ loop.index }}">
		    			{% set facetLoop = loop %}
						{% for facet_data in facet_attributes['data'] %}
							<div class="form-check">
								<input class="form-check-input" type="checkbox" value="facet.key" id="defaultCheck[{{ facetLoop.index }}][{{ loop.index }}]">
								<label class="form-check-label" for="defaultCheck[{{ facetLoop.index }}][{{ loop.index }}]">
									{{ facet_data.key }} ({{ facet_data.doc_count }})
								</label>
							</div>
						{% endfor %}
					
					</div>
				</fieldset>
			{% endfor %}
		</div>
		<div class="flex-grow-1">
			{{ debug }}

			{% for result in results %}
				
				<div class="card card--search_result rounded shadow-sm">
				  <div class="card-header bg-ec_dark_blue">
				    {{ result.acronym }}
				  </div>
				  <div class="card-body">
				    <h5 class="card-title">{{ result.title }}</h5>
				    <p class="card-text">{{ result.objective|safe }}</p>
				    <a class="btn btn-secondary" href="{{ result.id }}" role="button">View details Â»</a>
				  </div>
				  <div class="card-footer text-muted">
				  	{{ result.statusDetails }} - From {{ result.startDate }} to {{ result.endDate }}
				  </div>
				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}